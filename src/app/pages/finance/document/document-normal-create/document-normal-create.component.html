<nz-page-header nzBackIcon>
  <nz-breadcrumb nz-page-header-breadcrumb>
    <nz-breadcrumb-item><a routerLink="/finance/overview">{{'Common.Overview' | transloco}}</a></nz-breadcrumb-item>
    <nz-breadcrumb-item><a routerLink="/finance/document/list">{{'Finance.Documents' | transloco}}</a></nz-breadcrumb-item>
    <nz-breadcrumb-item>{{'Common.Create' | transloco}}</nz-breadcrumb-item>
  </nz-breadcrumb>
  <nz-page-header-title>{{'Finance.Document' | transloco}}</nz-page-header-title>
  <nz-page-header-subtitle>{{'Common.Create' | transloco}}</nz-page-header-subtitle>
</nz-page-header>

<nz-steps [nzCurrent]="current">
  <nz-step nzTitle="Header"></nz-step>
  <nz-step nzTitle="Items"></nz-step>
  <nz-step nzTitle="Review and Confirm"></nz-step>
  <nz-step nzTitle="Result"></nz-step>
</nz-steps>
<div class="steps-content">
  <!-- Header -->
  <form nz-form [formGroup]="headerForm" [hidden]="current !== 0">
    <hih-fin-document-header formControlName="headerControl" [docType]="curDocType" [currentUIMode]="curMode"
      [arDocTypes]="arDocTypes" [arCurrencies]="arCurrencies" [baseCurrency]="baseCurrency">
    </hih-fin-document-header>    
  </form>

  <!-- Items -->
  <form nz-form [formGroup]="itemsForm" [hidden]="current !== 1">
    <hih-fin-document-items formControlName="itemControl" [currentUIMode]="curMode" [docDate]="curDocDate"
      [arCurrencies]="arCurrencies" [arUIAccounts]="arUIAccounts" [arControlCenters]="arControlCenters"
      [arTranType]="arTranType" [arUIOrders]="arUIOrders"
      [docType]="curDocType">
    </hih-fin-document-items>
  </form>

  <!-- Review and Confirm -->
  <div [hidden]="current !== 2">
    <nz-spin nzSimple [nzSize]="'large'" [nzSpinning]="isDocPosting">
      <div>
        Click next buttont to submit.
      </div>
    </nz-spin>
  </div>

  <!-- Result -->
  <div [hidden]="current !== 3">
    <div *ngIf="docCreateSucceed">
      <nz-result  nzStatus="success"
        nzTitle="Successfully Purchased Cloud Server ECS!"
        nzSubTitle="Order number: 2017182818828182881 Cloud server configuration takes 1-5 minutes, please wait.">
        <div nz-result-extra>
          <button nz-button nzType="primary">Go Console</button>
          <button nz-button>Buy Again</button>
        </div>
      </nz-result>  
    </div>
    <div *ngIf="!docCreateSucceed">
      <nz-result nzTitle="Submission Failed"
        nzStatus="error"
        nzSubTitle="Please check and modify the following information before resubmitting.">
        <div nz-result-content>
          <div class="desc">
            <h4 nz-title>The content you submitted has the following error:</h4>
            <p nz-paragraph>
              <i nz-icon nzType="close-circle"></i>
              Your account has been frozen <a>Thaw immediately &gt;</a>
            </p>
            <p nz-paragraph>
              <i nz-icon nzType="close-circle"></i>
              Your account is not yet eligible to apply <a>Apply immediately &gt;</a>
            </p>
          </div>
        </div>
        <div nz-result-extra>
          <button nz-button nzType="primary">Go Console</button>
          <button nz-button>Buy Again</button>
        </div>
      </nz-result>
    </div>
  </div>
</div>

<div class="steps-action">
  <button nz-button (click)="pre()" *ngIf="current > 0 && current < 3">
    <span>Previous</span>
  </button>
  <button nz-button nzType="primary" (click)="next()" [disabled]="!nextButtonEnabled" *ngIf="current < 3">
    <span>Next</span>
  </button>
</div>
